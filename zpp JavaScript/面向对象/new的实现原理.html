<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script>
			function fn(name, age, color) {
				this.name = name
				this.age = age
				this.color = color


			}

			function _new() {

				let target = {}; //创建的新对象

				//第一个参数是构造函数
                 console.log([...arguments] )
				let [constructor, ...args] = [...arguments];
				//let obj = Object.create(Fn.prototype)
                
				//执行[[原型]]连接;target是constructor的实例

				target.__proto__ = constructor.prototype;

				//执行构造函数，将属性或方法添加到创建的空对象上

				let result = constructor.apply(target, args);
				console.log(target)
				

				if (result && (typeof(result) == 'object' || typeof(result) == 'function')) {

					//如果构造函数执行的结构返回的是一个对象，那么返回这个对象

					return result;

				}

				//如果构造函数返回的不是一个对象，返回创建的新对象

				return target;

			}
			 var b = _new(fn,1,12,3)
			 console.log(b)
			 
			
		</script>
	</body>
</html>
